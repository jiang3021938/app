2026-02-09 22:20:27,685 - main - INFO - === Logging system initialized ===
2026-02-09 22:20:27,685 - main - INFO - Log file: logs/app_20260209_222027.log
2026-02-09 22:20:27,686 - main - INFO - Log level: INFO
2026-02-09 22:20:27,686 - main - INFO - Timestamp: 20260209_222027
2026-02-09 22:20:28,278 - main - INFO - Included router: routers.aihub.router
2026-02-09 22:20:28,292 - main - INFO - Included router: routers.auth.router
2026-02-09 22:20:28,335 - main - INFO - Included router: routers.documents.router
2026-02-09 22:20:28,390 - main - INFO - Included router: routers.extractions.router
2026-02-09 22:20:28,395 - main - INFO - Included router: routers.google_auth.router
2026-02-09 22:20:28,396 - main - INFO - Included router: routers.health.router
2026-02-09 22:20:28,580 - main - INFO - Included router: routers.lease_analysis.router
2026-02-09 22:20:28,623 - main - INFO - Included router: routers.payments.router
2026-02-09 22:20:28,642 - main - INFO - Included router: routers.settings.router
2026-02-09 22:20:28,679 - main - INFO - Included router: routers.state_regulations.router
2026-02-09 22:20:28,701 - main - INFO - Included router: routers.storage.router
2026-02-09 22:20:28,721 - core.config - DEBUG - Read dynamic attribute stripe_secret_key from environment variable STRIPE_SECRET_KEY
2026-02-09 22:20:28,731 - main - INFO - Included router: routers.stripe_payments.router
2026-02-09 22:20:28,739 - main - INFO - Included router: routers.user.router
2026-02-09 22:20:28,861 - main - INFO - Included router: routers.user_credits.router
2026-02-09 22:20:28,862 - main - INFO - === Application startup initiated ===
2026-02-09 22:20:28,862 - services.database - DEBUG - [DB_OP] Starting database initialization
2026-02-09 22:20:28,862 - services.database - INFO - ðŸ”§ Starting database initialization...
2026-02-09 22:20:28,862 - core.database - INFO - Starting database initialization...
2026-02-09 22:20:28,862 - core.config - DEBUG - Read dynamic attribute database_url from environment variable DATABASE_URL
2026-02-09 22:20:28,863 - core.database - INFO - Normalizing database URL for async compatibility...
2026-02-09 22:20:28,863 - core.database - INFO - Creating async database engine...
2026-02-09 22:20:28,863 - core.database - INFO - Using QueuePool with connection pooling for non-Lambda environment
2026-02-09 22:20:28,901 - core.database - INFO - Database engine created successfully
2026-02-09 22:20:28,901 - core.database - INFO - Creating async session maker...
2026-02-09 22:20:28,901 - core.database - INFO - Async session maker created successfully
2026-02-09 22:20:28,901 - core.database - INFO - Database connection initialized successfully
2026-02-09 22:20:28,901 - services.database - INFO - ðŸ”§ Database connection initialized, now creating tables if tables not exist...
2026-02-09 22:20:28,901 - core.database - DEBUG - [DB_OP] Starting create_tables
2026-02-09 22:20:28,902 - core.database - INFO - ðŸ”§ Starting table creation...
2026-02-09 22:20:30,464 - core.database - INFO - Tables initialized successfully
2026-02-09 22:20:30,464 - core.database - DEBUG - [DB_OP] Create tables completed in 1.5629s
2026-02-09 22:20:30,525 - services.database - INFO - ðŸ”§ Table creation completed
2026-02-09 22:20:30,525 - services.database - INFO - ðŸ”§ Checking and repairing existing tables...
2026-02-09 22:20:30,953 - services.database - INFO - Existing columns in extractions table: ['monthly_rent', 'renewal_notice_days', 'created_at', 'security_deposit', 'document_id', 'id', 'lease_end_date', 'pet_policy', 'late_fee_terms', 'risk_flags', 'raw_extraction', 'compliance_data', 'source_map', 'pages_meta', 'user_id', 'tenant_name', 'landlord_name', 'property_address', 'lease_start_date']
2026-02-09 22:20:31,013 - services.database - INFO - ðŸ”§ Table repair completed
2026-02-09 22:20:31,013 - services.database - INFO - Database initialized successfully
2026-02-09 22:20:31,013 - services.database - DEBUG - [DB_OP] Database initialization completed in 2.1513s
2026-02-09 22:20:31,014 - services.mock_data - INFO - Processing mock data file state_regulations.json for table state_regulations
2026-02-09 22:20:32,934 - services.mock_data - INFO - Table state_regulations already has 50 rows; skipping mock insert
2026-02-09 22:20:32,994 - services.database - DEBUG - [DB_OP] Starting database initialization
2026-02-09 22:20:32,994 - services.database - INFO - ðŸ”§ Starting database initialization...
2026-02-09 22:20:32,994 - core.database - INFO - Starting database initialization...
2026-02-09 22:20:32,994 - core.database - INFO - Database already initialized
2026-02-09 22:20:32,995 - services.database - INFO - ðŸ”§ Database connection initialized, now creating tables if tables not exist...
2026-02-09 22:20:32,995 - core.database - DEBUG - [DB_OP] Starting create_tables
2026-02-09 22:20:32,995 - core.database - INFO - Tables already initialized
2026-02-09 22:20:32,995 - services.database - INFO - ðŸ”§ Table creation completed
2026-02-09 22:20:32,995 - services.database - INFO - ðŸ”§ Checking and repairing existing tables...
2026-02-09 22:20:33,353 - services.database - INFO - Existing columns in extractions table: ['monthly_rent', 'renewal_notice_days', 'created_at', 'security_deposit', 'document_id', 'id', 'lease_end_date', 'pet_policy', 'late_fee_terms', 'risk_flags', 'raw_extraction', 'compliance_data', 'source_map', 'pages_meta', 'user_id', 'tenant_name', 'landlord_name', 'property_address', 'lease_start_date']
2026-02-09 22:20:33,413 - services.database - INFO - ðŸ”§ Table repair completed
2026-02-09 22:20:33,413 - services.database - INFO - Database initialized successfully
2026-02-09 22:20:33,413 - services.database - DEBUG - [DB_OP] Database initialization completed in 0.4193s
2026-02-09 22:20:33,413 - core.config - DEBUG - Read dynamic attribute admin_user_id from environment variable ADMIN_USER_ID
2026-02-09 22:20:33,413 - core.config - DEBUG - Read dynamic attribute admin_user_email from environment variable ADMIN_USER_EMAIL
2026-02-09 22:20:33,779 - services.auth - DEBUG - Admin user 956410 already exists
2026-02-09 22:20:33,839 - main - INFO - === Application startup completed successfully ===
2026-02-09 22:24:03,074 - core.config - DEBUG - Read dynamic attribute jwt_secret_key from environment variable JWT_SECRET_KEY
2026-02-09 22:24:03,074 - core.config - DEBUG - Read dynamic attribute jwt_algorithm from environment variable JWT_ALGORITHM
2026-02-09 22:24:03,272 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:24:03,760 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:24:03,760 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:24:03,760 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:24:03,761 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:24:04,308 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:24:04,309 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.5495s
2026-02-09 22:24:04,823 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:24:04,823 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:24:04,823 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:24:05,187 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.3638s
2026-02-09 22:25:39,900 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:25:40,332 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:25:40,333 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:25:40,333 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0003s
2026-02-09 22:25:40,333 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:25:41,055 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:25:41,056 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.7232s
2026-02-09 22:25:41,483 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:25:41,484 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:25:41,484 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:25:41,792 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.3080s
2026-02-09 22:29:17,674 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:29:18,111 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:29:18,111 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:29:18,111 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0003s
2026-02-09 22:29:18,111 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:29:18,531 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:29:18,532 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.4210s
2026-02-09 22:29:18,990 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:29:18,991 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:29:18,991 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:29:19,292 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.3011s
2026-02-09 22:30:19,671 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:30:20,125 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:30:20,125 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:30:20,125 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:30:20,126 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:30:20,542 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:30:20,543 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.4177s
2026-02-09 22:30:20,998 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:30:20,999 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:30:20,999 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:30:21,298 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2995s
2026-02-09 22:31:23,112 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:31:23,586 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:31:23,587 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:31:23,587 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:31:23,587 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:31:24,123 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:31:24,124 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.5367s
2026-02-09 22:31:24,594 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:31:24,595 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:31:24,595 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:31:24,893 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2983s
2026-02-09 22:33:07,899 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:33:08,356 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:33:08,357 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:33:08,357 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:33:08,357 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:33:08,775 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:33:08,776 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.4188s
2026-02-09 22:33:09,287 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:33:09,288 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:33:09,288 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:33:09,587 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2990s
2026-02-09 22:34:12,439 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:34:12,897 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:34:12,898 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:34:12,898 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:34:12,898 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:34:13,315 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:34:13,316 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.4186s
2026-02-09 22:34:13,816 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:34:13,816 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:34:13,816 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:34:14,114 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2978s
2026-02-09 22:35:16,858 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:35:17,320 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:35:17,320 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:35:17,320 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:35:17,321 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:35:17,739 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:35:17,740 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.4198s
2026-02-09 22:35:18,210 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:35:18,211 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:35:18,211 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0003s
2026-02-09 22:35:18,512 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.3018s
2026-02-09 22:36:20,696 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:36:21,083 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:36:21,083 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:36:21,083 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-02-09 22:36:21,083 - routers.documents - DEBUG - Querying documentss: query=None, sort=-created_at, skip=0, limit=50, fields=None
2026-02-09 22:36:21,499 - routers.documents - DEBUG - Found 16 documentss
2026-02-09 22:36:21,500 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.4175s
2026-02-09 22:36:21,968 - core.auth - DEBUG - Authentication token validated for user hash: a89dfb40
2026-02-09 22:36:21,968 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-09 22:36:21,968 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0001s
2026-02-09 22:36:22,266 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2978s
2026-02-09 22:36:43,956 - services.database - DEBUG - [DB_OP] Starting database close
2026-02-09 22:36:44,020 - core.database - INFO - Database connection closed and engine disposed
2026-02-09 22:36:44,020 - services.database - INFO - Database connections closed
2026-02-09 22:36:44,020 - services.database - DEBUG - [DB_OP] Database close completed in 0.0636s
